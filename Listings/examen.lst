C51 COMPILER V9.60.0.0   EXAMEN                                                            05/18/2023 09:49:10 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE EXAMEN
OBJECT MODULE PLACED IN .\Objects\examen.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE examen.c OPTIMIZE(8,SPEED) BROWSE NOAREGS DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\examen.lst) TABS(2) OBJECT(.\Objects\examen.obj)

line level    source

   1          #include <REG552.H>
   2          
   3          #define BaseTiempo               50000
   4          #define FrecOsc                  11.0592
   5          #define DesbordamientosPorSegudo 20
   6          
   7          // variables globales
   8          unsigned char TL_0, TH_0;
   9          unsigned char contador;
  10          
  11          // entradas
  12          sbit marcha = 0x90;
  13          sbit S1     = 0x91;
  14          sbit S2     = 0x92;
  15          
  16          // salidas
  17          sbit LED_M           = 0xC0;
  18          sbit ValvulaVaciado  = 0xC1;
  19          sbit BombaHidraulica = 0xC2;
  20          
  21          void inicializar(void);
  22          
  23          void main(void)
  24          {
  25   1          inicializar();
  26   1          while (1) {
  27   2              while (marcha == 0) {
  28   3                  TR0             = 0;
  29   3                  contador        = 0;
  30   3                  BombaHidraulica = 0;
  31   3                  ValvulaVaciado  = 0;
  32   3                  TL0             = TL_0;
  33   3                  TH0             = TH_0;
  34   3              }
  35   2              if ((marcha == 1) && ((S2 == 0) || (S1 == 0))) {
  36   3                  TR0   = 1;
  37   3                  LED_M = 1;
  38   3                  if ((S2 == 1)&&(S1 == 1)){
  39   4                      TR0 = 0;
  40   4                  }
  41   3                  
  42   3              }
  43   2          }
  44   1      }
  45          
  46          void inicializar(void)
  47          {
  48   1          // varoables locales
  49   1          unsigned int vi;
  50   1          TMOD            = 0x01;
  51   1          vi              = (0xFFFF + 1) - BaseTiempo * FrecOsc / 12.0;
  52   1          TL_0            = vi;
  53   1          TH_0            = vi >> 8;
  54   1          TL0             = TL_0;
C51 COMPILER V9.60.0.0   EXAMEN                                                            05/18/2023 09:49:10 PAGE 2   

  55   1          TH0             = TH_0;
  56   1          EA              = 1;
  57   1          ET0             = 1;
  58   1          LED_M           = 0;
  59   1          ValvulaVaciado  = 0;
  60   1          BombaHidraulica = 0;
  61   1          
  62   1      }
  63          
  64          void interrupcion(void) interrupt 1 using 2
  65          {
  66   1          TL0      = TL_0;
  67   1          TH0      = TH_0;
  68   1          contador = contador + 1;
  69   1          if (contador == 1) {
  70   2              ValvulaVaciado  = 0;
  71   2              BombaHidraulica = 1;
  72   2          }
  73   1          if ((contador == (10 * DesbordamientosPorSegudo)) || (S2 == 1)) {
  74   2              ValvulaVaciado  = 1;
  75   2              BombaHidraulica = 0;
  76   2              contador        = 0;
  77   2          }
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    123    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
